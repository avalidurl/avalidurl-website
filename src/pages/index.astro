---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// Fetch home singleton
const heroTitle = 'GÖKHAN TURHAN';
const heroSubtitle = 'I am a T-shaped generalist solopreneur, researcher, and conceptual artist operating across fintech, deep tech, competitive governance, art markets, and investment strategies. My research focuses on stablecoins, RWAs, tokenization, cryptography, AGI timelines, and global systemic challenges.';
// Removed dynamic hero content loading due to deprecated getSingleton API.

// Get recent blog posts
const allBlogPosts = await getCollection('blog', ({ data }) => {
  // Ensure draft field exists and is not true
  const isDraft = data.draft === true;
  
  // Ensure publishDate is valid and not in the future
  const publishDate = new Date(data.publishDate);
  const now = new Date();
  const isValidDate = !isNaN(publishDate.getTime());
  const isNotFuture = publishDate <= now;
  
  return !isDraft && isValidDate && isNotFuture;
});

const recentBlogPosts = allBlogPosts
  .sort((a, b) => new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime())
  .slice(0, 3);

// Get products
const allProducts = await getCollection('products', ({ data }) => {
  return !data.draft;
});

const products = allProducts
  .sort((a, b) => new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime());
---

<Layout 
  title="Gökhan Turhan - T-shaped Generalist Solopreneur, Researcher & Conceptual Artist"
  description="I am a T-shaped generalist solopreneur, researcher, and conceptual artist operating across fintech, deep tech, competitive governance, art markets, and investment strategies. My research focuses on stablecoins, RWAs, tokenization, cryptography, AGI timelines, and global systemic challenges."
>
  <main class="container">
    <header class="page-header">
      <h1>{heroTitle}</h1>
    </header>
    
    <section class="bio">
      <p>{heroSubtitle}</p>
      <p>My main areas of interest converge upon the junction of stablecoins, real assets, tokenization, information markets, sabermetrics, and the ever-emergent art of investment.</p>
      <p>I enjoy heavy training, running, cooking, sound art, cars, and history. I believe in the deep tech causes that will unconditionally accelerate our species toward a Kardashev-scale immediate future.</p>
      <p>I primarily post on <a href="https://x.com/0xgokhan" target="_blank" rel="noopener noreferrer" class="dotted-link">X</a> and maintain the <a href="/blog" class="dotted-link">journal</a> here, while remaining accessible on <a href="https://linkedin.com/in/goekhantuerhan" target="_blank" rel="noopener noreferrer" class="dotted-link">LinkedIn</a>. You can find more links and resources on my <a href="/links" class="dotted-link">links</a> page, and I also maintain a curated <a href="/reading-list" class="dotted-link">reading list</a> here.</p>
      
      <div class="social-links">
        <p>You can follow me on <a href="https://x.com/0xgokhan" target="_blank" rel="noopener noreferrer" class="dotted-link">X</a>, <a href="https://github.com/avalidurl" target="_blank" rel="noopener noreferrer" class="dotted-link">GitHub</a>, <a href="https://linkedin.com/in/goekhantuerhan" target="_blank" rel="noopener noreferrer" class="dotted-link">LinkedIn</a>, and check other socials on <a href="/links" class="dotted-link">links</a>.</p>
      </div>
    </section>
    
    <style>
      .content-section {
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid var(--border-light);
      }
      
      .content-section h2 {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        border-bottom: 1px solid var(--border-light);
        padding-bottom: 0.75rem;
      }
      
      .articles-list {
        padding: 0;
        margin-bottom: 0;
      }

      .article-item {
        margin: 0;
        padding: 0;
      }

      .article-line {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.5rem 0;
        margin-bottom: 0.25rem;
        transition: background-color 0.2s ease;
        border-bottom: 1px solid transparent;
      }

      .article-line:hover {
        background: rgba(0, 0, 0, 0.02);
      }

      .article-date {
        color: var(--text-muted);
        font-size: 0.8rem;
        font-weight: 400;
        white-space: nowrap;
        flex-shrink: 0;
        min-width: 80px;
      }

      .article-title {
        color: var(--text-primary);
        text-decoration: none;
        font-size: 0.95rem;
        font-weight: 400;
        line-height: 1.4;
        transition: color 0.2s ease;
        border-bottom: 1px dotted var(--text-muted);
        flex: 1;
        min-width: 0;
      }

      .article-title:hover {
        color: var(--color-primary);
        border-bottom-color: var(--color-primary);
      }

      .article-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0;
        align-items: center;
        flex-shrink: 0;
      }

      .article-tag {
        color: #FF8C00;
        font-size: 0.75rem;
        font-weight: 400;
        text-decoration: none;
        transition: color 0.2s ease;
      }

      .article-tag:hover {
        color: #FF4500;
      }

      .article-tag:not(:last-child)::after {
        content: ", ";
        color: var(--text-muted);
      }
      
      .section-footer {
        margin-top: 1.5rem;
        padding-top: 1rem;
        border-top: 1px solid var(--border-light);
      }
      
      .view-all-link {
        color: var(--color-primary);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        transition: color 0.2s ease;
        border-bottom: 1px dotted var(--color-primary);
      }
      
      .view-all-link:hover {
        color: var(--color-primary-hover);
        border-bottom-color: var(--color-primary-hover);
      }
      
      @media (max-width: 768px) {
        .article-line {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.25rem;
          padding: 0.4rem 0;
        }

        .article-date {
          font-size: 0.75rem;
          min-width: auto;
        }

        .article-title {
          border-bottom: none;
          width: 100%;
        }

        .article-tags {
          width: 100%;
        }
      }
    </style>
    
    <section class="content-section">
      <h2>Products</h2>
      <div class="articles-list">
        {products.map(product => (
          <article class="article-item">
            <div class="article-line">
              <time class="article-date">
                {new Date(product.data.publishDate).toLocaleDateString('en-CA')}
              </time>
              <a href={product.data.url} target="_blank" rel="noopener noreferrer" class="article-title">
                {product.data.title}
              </a>
              {product.data.tags && product.data.tags.length > 0 && (
                <div class="article-tags">
                  {product.data.tags.sort((a, b) => a.localeCompare(b)).slice(0, 3).map(tag => (
                    <a href={`/topics/${tag.toLowerCase().replace(/\s+/g, '-')}`} class="article-tag">{tag}</a>
                  ))}
                </div>
              )}
            </div>
          </article>
        ))}
      </div>
    </section>
    
    <section class="content-section">
      <h2>Recent Posts</h2>
      <div class="articles-list">
        {recentBlogPosts.map(post => (
          <article class="article-item">
            <div class="article-line">
              <time class="article-date">
                {new Date(post.data.publishDate).toLocaleDateString('en-CA')}
              </time>
              <a href={`/blog/${post.slug}`} class="article-title">
                {post.data.title}
              </a>
              {post.data.tags && post.data.tags.length > 0 && (
                <div class="article-tags">
                  {post.data.tags.sort((a, b) => a.localeCompare(b)).slice(0, 3).map(tag => (
                    <a href={`/topics/${tag.toLowerCase().replace(/\s+/g, '-')}`} class="article-tag">{tag}</a>
                  ))}
                </div>
              )}
            </div>
          </article>
        ))}
      </div>
      <div class="section-footer">
        <a href="/blog" class="view-all-link">View all posts →</a>
      </div>
    </section>
    
  </main>
</Layout>